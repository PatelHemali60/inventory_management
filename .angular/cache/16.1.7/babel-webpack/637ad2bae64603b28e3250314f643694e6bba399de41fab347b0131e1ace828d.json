{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Output } from '@angular/core';\nimport { Validators } from '@angular/forms';\nexport let AddRoleComponent = class AddRoleComponent {\n  constructor(fb, usersService, router, route) {\n    this.fb = fb;\n    this.usersService = usersService;\n    this.router = router;\n    this.route = route;\n    this.userForm = this.buildUsersForm();\n    this.departments = [];\n    this.id = this.route.snapshot.params['id'];\n    this.isAddMode = !this.id;\n  }\n  //On init get department list and ckeck if its addMode\n  ngOnInit() {\n    this.getDepartmentList();\n    this.getcategoryList();\n    this.id = this.route.snapshot.params['id'];\n    this.isAddMode = !this.id;\n    if (!this.isAddMode) {\n      this.usersService.getById(this.id).subscribe(x => this.userForm.patchValue(x));\n    }\n  }\n  //Reactive Form\n  buildUsersForm() {\n    return this.fb.group({\n      productname: [1, Validators.required],\n      category: [1, Validators.required],\n      Subcategory: [1, Validators.required],\n      Brand: [1, Validators.required]\n    });\n  }\n  //get department list from db\n  getDepartmentList() {\n    this.usersService.getDepartments().subscribe({\n      next: data => {\n        this.departments = data;\n      },\n      error: e => console.log(e)\n    });\n  }\n  //category list\n  getcategoryList() {\n    this.usersService.getCategory().subscribe({\n      next: data => {\n        this.categoryList = data;\n      },\n      error: e => console.log(e)\n    });\n  }\n  //Post data to db\n  createProduct() {\n    this.productData = {\n      productname: this.userForm.value.productname,\n      category: this.userForm.value.category,\n      Subcategory: this.userForm.value.Subcategory\n    };\n    console.log(this.productData, 'dataaaaaaaa');\n    this.usersService.createProduct(this.productData).subscribe({\n      next: () => {\n        this.onSubmitData.emit(this.productData);\n        this.navigateToList();\n      },\n      error: e => console.log(e)\n    });\n  }\n  //on Form submit\n  //on Form submit\n  onSubmit() {\n    console.log('hello there');\n    if (this.isAddMode) {\n      this.createProduct();\n    } else {\n      this.updateUser();\n    }\n  }\n  //Put data to db\n  updateUser() {\n    this.usersService.updateProduct(this.id, this.userForm.value).subscribe({\n      next: () => {\n        this.navigateToList();\n      },\n      error: e => console.log(e)\n    });\n  }\n  navigateToList() {\n    this.router.navigate(['/inventory']);\n  }\n  //Rest to form controls\n  onRest() {\n    this.userForm.reset();\n  }\n  onCancel() {\n    this.cancel.emit();\n  }\n};\n__decorate([Output()], AddRoleComponent.prototype, \"cancel\", void 0);\n__decorate([Output()], AddRoleComponent.prototype, \"onSubmitData\", void 0);\nAddRoleComponent = __decorate([Component({\n  selector: 'app-add-role',\n  templateUrl: './add-role.component.html',\n  styleUrls: ['./add-role.component.scss']\n})], AddRoleComponent);","map":{"version":3,"names":["Component","Output","Validators","AddRoleComponent","constructor","fb","usersService","router","route","userForm","buildUsersForm","departments","id","snapshot","params","isAddMode","ngOnInit","getDepartmentList","getcategoryList","getById","subscribe","x","patchValue","group","productname","required","category","Subcategory","Brand","getDepartments","next","data","error","e","console","log","getCategory","categoryList","createProduct","productData","value","onSubmitData","emit","navigateToList","onSubmit","updateUser","updateProduct","navigate","onRest","reset","onCancel","cancel","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\pc1\\Desktop\\inventory_dashboard\\inventory\\src\\app\\modules\\role\\add-role\\add-role.component.ts"],"sourcesContent":["import { Component, EventEmitter, Output } from '@angular/core';\nimport { RoleService } from '../service/role.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'app-add-role',\n  templateUrl: './add-role.component.html',\n  styleUrls: ['./add-role.component.scss']\n})\nexport class AddRoleComponent {\n\n\n  @Output() cancel : EventEmitter<Event>;\n  @Output() onSubmitData: EventEmitter<Event>\n\n  public userForm: FormGroup;\n  public departments: product[];\n\n  public id:number;\n\n\n  constructor(private fb: FormBuilder, private usersService: RoleService, private router: Router, private route: ActivatedRoute,) {\n    this.userForm = this.buildUsersForm();\n    this.departments = [];\n    this.id = this.route.snapshot.params['id'];\n    this.isAddMode = !this.id;\n\n  }\n\n\n  //On init get department list and ckeck if its addMode\n  ngOnInit(): void {\n    this.getDepartmentList();\n    this.getcategoryList();\n\n\n\n    this.id = this.route.snapshot.params['id'];\n    this.isAddMode = !this.id;\n\n    if (!this.isAddMode) {\n      this.usersService.getById(this.id).subscribe(x => this.userForm.patchValue(x));\n    }\n  }\n\n  //Reactive Form\n  private buildUsersForm(): FormGroup {\n    return this.fb.group({\n      productname: [1, Validators.required],\n      category:[1,Validators.required],\n      Subcategory:[1,Validators.required],\n      Brand:[1, Validators.required],\n\n    });\n  }\n\n\n  //get department list from db\n  private getDepartmentList(): void {\n    this.usersService.getDepartments().subscribe({\n      next:(data: any[]) => {\n        this.departments = data;\n      },\n      error:(e) => console.log(e)\n    });\n  }\n\n  //category list\n  private getcategoryList(): void {\n    this.usersService.getCategory().subscribe({\n      next:(data: any[]) => {\n        this.categoryList = data;\n      },\n      error:(e) => console.log(e)\n    });\n  }\n\n\n\n\n\n\n\n     //Post data to db\n  public createProduct(): void {\n\n    this.productData = {\n      productname: this.userForm.value.productname,\n      category: this.userForm.value.category,\n      Subcategory:this.userForm.value.Subcategory,\n\n\n    }\n\n    console.log(this.productData, 'dataaaaaaaa');\n\n    this.usersService.createProduct(this.productData).subscribe({\n      next:() => {\n        this.onSubmitData.emit(this.productData);\n        this.navigateToList();\n      },\n      error:(e:any) => console.log(e)\n    });\n  }\n\n  //on Form submit\n  //on Form submit\n  public onSubmit(): void {\n    console.log('hello there')\n    if (this.isAddMode) {\n      this.createProduct();\n    }\n    else {\n      this.updateUser();\n    }\n  }\n\n   //Put data to db\n   public updateUser(): void {\n\n    this.usersService.updateProduct(this.id, this.userForm.value).subscribe({\n      next: () => {\n\n        this.navigateToList();\n      },\n      error: (e:any) => console.log(e)\n    })\n  }\n\n\n  public navigateToList(): void {\n    this.router.navigate(['/inventory'])\n  }\n\n  //Rest to form controls\n  onRest() {\n    this.userForm.reset();\n  }\n\n  onCancel(){\n    this.cancel.emit();\n  }\n\n\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}